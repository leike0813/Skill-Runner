name: skillrunner
services:
  api:
    image: leike0813/skill-runner:v0.3.3
    ports:
      - "8000:8000"
      - "7681:7681"
    environment:
      SKILL_RUNNER_RUNTIME_MODE: container
      SKILL_RUNNER_DATA_DIR: /data
      SKILL_RUNNER_AGENT_CACHE_DIR: /opt/cache/skill-runner
      SKILL_RUNNER_AGENT_HOME: /opt/cache/skill-runner/agent-home
      SKILL_RUNNER_NPM_PREFIX: /opt/cache/skill-runner/npm
      UV_CACHE_DIR: /opt/cache/skill-runner/uv_cache
      UV_PROJECT_ENVIRONMENT: /opt/cache/skill-runner/uv_venv
      NPM_CONFIG_PREFIX: /opt/cache/skill-runner/npm
      UI_SHELL_TTYD_PORT: 7681
      # UI Basic Auth is injected at runtime (not baked into image ENV).
      # Set to "true" and provide username/password for exposed deployments.
      UI_BASIC_AUTH_ENABLED: "false"
      # UI_BASIC_AUTH_USERNAME: "admin"
      # UI_BASIC_AUTH_PASSWORD: "change-me"
    volumes:
      - ./skills:/app/skills
      - ./agent_config:/opt/config
      - skillrunner_cache:/opt/cache
      # Optional: persist run/request data for debugging
      # - ./data:/data
    networks:
      - skillrunner_net
volumes:
  skillrunner_cache:
    name: skillrunner-cache
networks:
  skillrunner_net:
    name: skillrunner-net
